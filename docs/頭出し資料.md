# 品出しリストアプリ

## 概要

### 背景
現在、店舗における品出し業務では、以下のような運用を行っています。

- 商品が売れると、スタッフが商品タグを手でもぎ取り、一時的に保管
- 一定のタイミングで、保管したタグを持ってバックヤードに行き、品出し作業を実施

効率性・正確性・顧客対応の面で課題があります。

### 現状の課題
> **注:** () 内は例として記載しているため実際の課題を元に記載する

- **顧客対応**：タグをお渡しできないため、クレームに発展する可能性がある
- *(効率性)*：タグの保管、整理に手間がかかる
- *(正確性)*：タグの見間違いや紛失により漏れ・間違いが発生する

### このシステムで解決すること
> **注:** () 内は例として記載しているため実際の課題を元に記載する

- **顧客対応**：タグをもぎる必要がなくなる。（お客様にタグをお渡しできる）
- *(効率性)*：自動で品出しリストがアップされるのでタグの保管、整理が不要になる
- *(正確性)*：バーコードスキャンによって誤った商品の場合は警告をだし、正確な品出しが行える

### ゴール
> **注:** () 内は例として記載しているため実際の課題を元に記載する

- もぎり、タグ管理作業がなくなる
- （品出し漏れ、間違い 0 件になる）

## システム概要

### 認証
- Microsoft Entra ID によるSSO（シングルサインオン）
- 店舗 ID でログインし、所属店舗情報や権限をアプリに連携

### データ連携
- クレメンティアから15分毎に売上データを取得し、品出しリスト用DBへ品出しリストを登録
- クレメンティア側に売上データが連携されるのが15分毎のため15分間隔

#### データ取得の詳細
- 売上取得するデータの詳細を確認
- 売価変更をCLEMENTIAでもれなく登録するといった運用の前提条件
- 売価変、%OFFの登録はしていないが必須、全品番でやる必要がある
- %OFF のバーコードが別にある
- 売上じゃなくて在庫情報から計算すれば取れる

### 品出しリスト
- ログインしている店舗の品出しリストを表示
- 品出しした商品の消し込み
  - カメラでバーコードを読み込む（要検討）
  - 簡単かつ素早く消し込み可能な UI（要検討）
  - 忙しいときに消し込みが負担にならないようにする
  - リストをスワイプするだけなど
- 履歴画面から品出しリストを復元
  - 誤って消し込みをしてしまったときに元に戻せるようにする

## アーキテクチャ

*（要検討）*

## フロントエンド構成検討

> **注:** フロントエンドを Web アプリにするか、ネイティブアプリにするか決定したい

### 案１：Web アプリ

#### メリット
- ユーザーはインストール不要、WEB にアクセスすればすぐ使える
- ユーザーによるアップデート操作不要（常に最新）
- iPad 以外でも使える

#### デメリット
- ネイティブより操作性・反応速度で劣る可能性
- オフライン対応やバーコード等の端末機能が制限される
- 特に iOS デバイスは制限が多い

### 案２：ネイティブアプリ（iOSアプリ）の場合

#### メリット
- カメラ・バーコードなど端末機能と連携可能
- 普段使っている UI でスムーズな操作が可能

#### デメリット
- Apple Developer Enterprise Program（ADEP）への登録が必要
  - 社内利用に限ったiOSアプリの配布には、ADEPへの登録が必須
  - 年額：299 USD
  - 登録には審査があり、「社内利用のみ」であることの証明が必要
- App Storeを経由せずに .ipa を配布可能
- 初回導入時、アプリ更新時は店舗スタッフが手動でインストールする必要がある（ポータルなどからDL）
- MDM 未導入のため完全自動更新は不可
- バージョンチェックし、更新ページへの誘導は可能
- プロファイルの更新のため機能に変更がなくても年１回は更新作業が必要

## システム化の課題

### クレメンティア連携のタイムラグ
- 売上データは15分ごとにクレメンティアに連携されるため、最大15分の遅延が発生
- 即時の品出し対応ができない可能性があるため、実運用に問題ないか検討が必要
- もっとリアルタイム性の高いデータソースがないか要検討